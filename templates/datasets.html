{% extends '_base.html' %}

{% block content %}

	<div class="container">
		    <form method="POST" action="/datasets">
		    <table class='table table-striped'> 
		    <thead>
			    <h4>Create A New Dataset:</h4>
			    <tr>
			    <!-- <th>{{ form.csrf_token }}</th> -->
		    	<th>{{ form.name.label }}:</th>
		    	<th>Description (Ig Type, Cell Sorting Marker, etc):</th>
		    	<th><label>Add to Project:</label></th>
		    	<th><label>Pairing:</label></th>
		    </thead>
			    <tr>
		        <!-- <th></th> -->
		        <th>{{ form.name(size=15, class="form-control") }}</th>
		        <th>{{ form.description(size=15, class="form-control") }}</th>
		        <!-- <th>Ig Type: {{ form.ig_type(size=10) }}</th> -->
		        <th>{{ form.project(class="form-control") }}</th>
		        <th>Expect VH/VL Paired Data? : {{ form.paired }}</th>
		        <th><input type="submit" value="Submit"></th>
	        </tr>
        </table>
		    </form>
	</div>

{% for dataset, files in datadict.iteritems() %}

<br>
<div class="container">
<a href="{{url_for('.dataset', id=dataset.id)}}"><h3>Dataset {{dataset.id}} </h3></a>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>Dataset Name</th>
				<th>Description</th>
				<th>IG Type</th>
				<th>VDJ+VJ Paired</th>
				<th>Run Analysis</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<th><a href="{{url_for('.dataset', id=dataset.id)}}">{{dataset.name}}</a></th>
				<th>{{dataset.description}}</th>
				<th>{{dataset.ig_type}}</th>
				{% if dataset.paired %}
					<th>YES</th>
				{% else %}
					<th></th>
				{% endif %}
				<th><a href="{{url_for('.mixcr', dataset_id=dataset.id)}}">MIXCR</a> <a href="{{url_for('.pandaseq', dataset_id=dataset.id)}}">PANDASEQ</a><th>
				</tr>
				<tr>
					{% set files = dataset.files %}
					{% include "partials/files.html" with context %}
				</tr>
				<tr>
					{% if dataset.files.all() == []%}
						<th><a href="{{url_for('.dataset', id=dataset.id)}}">Click Here To Add Files To Dataset {{dataset.id}}</a></th>
					{% endif %}
				</tr>				
			</tr>
		</tbody>
	</table>
</div>

{% endfor %}




{%endblock content %}


